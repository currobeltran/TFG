{% extends 'index.html' %}

{% block central %}

<link href="https://unpkg.com/tabulator-tables@4.9.3/dist/css/tabulator.min.css" rel="stylesheet">
<script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.9.3/dist/js/tabulator.min.js"></script>

<div class="row mt-3 ms-3 me-3" id="tablilla">
    
</div>

<script>
    var tabla = new Tabulator("#tablilla", {
        data:{{ table|safe }},
        columns:[
            {
                title:"Informaci贸n General",
                columns:[
                    {title:"Nombre",field:"Nombre"},
                    {title:"Acr贸nimo",field:"Acronimo"},
                    {title:"CR.GA",field:"CRGA"},
                    {title:"CR.GR",field:"CRGR"},
                    {title:"Cuatr.",field:"Cuatrimestre"},
                    {title:"Tipo",field:"Tipo"}
                ]
            },
            {
                title:"Informaci贸n curso pasado",
                columns:[
                    {title:"AL",field:"AlumnosAnteriorespasado"},
                    {title:"AL",field:"AlumnosActualespasado"},
                    {title:"GA",field:"GruposGrandespasado"},
                    {title:"GR",field:"GruposReducidospasado"},
                    {title:"Rat T",field:"RatioTeoriapasado"},
                    {title:"Rat P",field:"RatioPracticaspasado"}
                ]
            },
            {
                title:"Informaci贸n curso actual",
                columns:[
                    {title:"AL",field:"AlumnosAnterioresactual"},
                    {title:"AL",field:"AlumnosActualesactual"},
                    {
                        title:"GA",
                        field:"GruposGrandesactual",
                        editor:"input",
                        cellEdited:function(cell){
                            var fila = cell.getRow()
                            var ratio = fila.getCell("RatioTeoriaactual")
                            var alumnos = fila.getCell("AlumnosActualesactual")

                            var nuevoRatio = alumnos.getValue()/cell.getValue()
                            ratio.setValue(nuevoRatio, true)
                        }
                    },
                    {
                        title:"GR",
                        field:"GruposReducidosactual",
                        editor:"input",
                        cellEdited:function(cell){
                            var fila = cell.getRow()
                            var ratio = fila.getCell("RatioPracticasactual")
                            var alumnos = fila.getCell("AlumnosActualesactual")

                            var nuevoRatio = alumnos.getValue()/cell.getValue()
                            ratio.setValue(nuevoRatio, true)
                        }
                    },
                    {title:"Rat T",field:"RatioTeoriaactual"},
                    {title:"Rat P",field:"RatioPracticasactual"}
                ]
            },
            {
                title:"Incrementos curso pasado/actual",
                columns:[
                    {title:"Dif",field:"Diferencia"},
                    {title:"IT",field:"IncrementoTeoria"},
                    {title:"IP",field:"IncrementoPractica"},
                    {title:"INC",field:"IncrementoTotal"},
                    {title:"CD",field:"Creditos"}
                ]
            }
        ]
    })
</script>
{% endblock %}